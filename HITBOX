local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local charsFolder = Workspace:WaitForChild("Characters")
local hitboxes = {}

-- части для мобов
local importantParts = {
    Bunny = "HumanoidRootPart",
    Wolf = "HumanoidRootPart",
    ["Crossbow Cultist"] = "Torso",
    Cultist = "HumanoidRootPart"
}

-- создание отдельного хитбокса
local function createHitbox(char)
    local partName = importantParts[char.Name]
    if not partName then return end

    local root = char:FindFirstChild(partName)
    if not (root and root:IsA("BasePart")) then return end
    if hitboxes[char] then return end

    -- создаём отдельный хитбокс
    local hb = Instance.new("Part")
    hb.Name = char.Name .. "_Hitbox"
    hb.Size = Vector3.new(1500, 1500, 1500) -- огромный
    hb.Anchored = true
    hb.CanCollide = false
    hb.Transparency = 1
    hb.CanQuery = true   -- игрок может попадать по нему
    hb.CanTouch = true   -- игрок может наносить урон
    hb.Parent = Workspace

    hitboxes[char] = {root = root, hb = hb}

    -- если моб удалён → удалить хитбокс
    char.AncestryChanged:Connect(function(_, parent)
        if not parent and hitboxes[char] then
            hitboxes[char].hb:Destroy()
            hitboxes[char] = nil
        end
    end)
end

-- автообновление позиций хитбоксов
RunService.Heartbeat:Connect(function()
    for char, data in pairs(hitboxes) do
        if data.root and data.hb then
            data.hb.CFrame = data.root.CFrame
        end
    end
end)

-- существующие мобы
for _, char in ipairs(charsFolder:GetChildren()) do
    createHitbox(char)
end

-- новые мобы
charsFolder.ChildAdded:Connect(function(char)
    task.wait(0.2)
    createHitbox(char)
end)
